"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2571],{23858:(e,t,o)=>{o.d(t,{A:()=>m}),o(35890);var a=o(96540),i=o(61225),s=o(2844),n=o(84510),r=o(72505),l=o.n(r),c=o(13244);const p=e=>e.charAt(0).toUpperCase()+e.slice(1),d=(0,n.A)(s.A),m=(0,i.Ng)(((e,t)=>{let o=(0,c.md)(t.permissionKey),a=o&&o.key?o.key:null,i=a?(0,c.Q_)(a):{},s=e.staticData?e.staticData.userInfo:{},n=s.hasOwnProperty("name")?s.name:null,r="",l="";if(n){let e=n.split(" ");e.length>1?(r=p(e[0]),l=p(e[1])):r=p(n)}return{...t,firstName:t.firstName||r,lastName:t.lastName||l,mobileNumber:t.mobileNumber||(s.hasOwnProperty("phone")?s.phone:""),emailId:t.emailId||(s.hasOwnProperty("phone")?s.email:""),messageDetails:i,packageDetails:o,messageKey:a,deviceData:e.library.deviceData}}),{})((e=>{const{messageKey:t,packageDetails:o,messageDetails:i}=e,s=i&&i.messageDetails?i.messageDetails:null,[n,r]=(0,a.useState)({}),m="postAck",h=s?s[m]:{img_url:"",show_title_prefix:"",title_prefix:"",show_desc_suffix:"",desc_suffix:"",upgradeBtnText:""},[g,u]=(0,a.useState)(!1),[C,v]=(0,a.useState)({key:m,imageUrl:h.img_url,title:"".concat(h.show_title_prefix?h.title_prefix:"").concat(s&&s.title?s.title:""),subtext:"".concat(s&&s.description?s.description:"").concat(h.show_desc_suffix?" "+h.desc_suffix:"")});let b;return(0,a.useEffect)((()=>{l().get("/marketplace/supplier/getAllPermission.service").then((e=>{e.data&&r(e.data)}))}),[]),"postAck"==C.key?b={onClick:()=>{if(e.deviceData.isIphoneApp)window.location.href="/myaccount/jd-vendor/upgradeios";else if(!g&&(u(!0),n)){let t="",a="",i=n.hasOwnProperty("ownerMobileNumber")?n.ownerMobileNumber:"",s=n.hasOwnProperty("ownerEmail")?n.ownerEmail:"";if(n.hasOwnProperty("ownerName")){let e=n.ownerName.split(" ");e.length>1?(t=p(e[0]),a=p(e[1])):t=p(n.ownerName)}(0,c.oN)({currentPacakageId:n.hasOwnProperty("packageId")?n.packageId:"",storeName:n.hasOwnProperty("storeName")?n.storeName:"",firstName:t,lastName:a,mobileNumber:i,emailId:s,sourceDevice:(0,c.Pf)({deviceData:e.deviceData}),module:e.module,upgradePackageId:o&&o.key?o.key:null,cb:()=>{u(!1);const e={key:"close",imageUrl:"https://image1.jdomni.in/jdomni_email/Success_check_2_2107302057.gif",title:"Upgrade Request Sent Successfully",subtext:"Thank You, ".concat(t," ").concat(a,"! You've taken the first step towards owning a software your business would love. Our sales executive will get in touch with you shortly")};v(e)}})}},text:"".concat(h.upgradeBtnText),showLoader:g}:"close"==C.key&&(b={onClick:()=>{window.history.back()},className:"close-btn",text:"Close"}),a.createElement(a.Fragment,null,e.showUpgradeModal&&a.createElement(d,{imageUrl:C.imageUrl,title:C.title,onHidden:()=>{e.setUpgradeModal(!1)},btnProps:b,subtext:C.subtext}))}))},81228:(e,t,o)=>{o.d(t,{A:()=>r});var a=o(96540);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)({}).hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},i.apply(null,arguments)}function s(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var a=o.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class n extends a.Component{constructor(){super(...arguments),s(this,"state",{allowMultipleImages:!1}),s(this,"onFileUploadCB",null),s(this,"onErrorCB",null),s(this,"triggerClick",(e=>{let{onFileUploadCB:t,onErrorCB:o,allowMultipleImages:a,imgFor:i=""}=e;this.imgFor=i,!!a!=this.state.allowMultipleImages?(this.onFileUploadCB=t,this.onErrorCB=o,this.setState({allowMultipleImages:a},(e=>{this.inputElem&&this.inputElem.click()}))):(this.onFileUploadCB=t,this.onErrorCB=o,this.inputElem&&this.inputElem.click())}))}render(){let e={};return this.state.allowMultipleImages&&(e={multiple:"multiple"}),a.createElement("div",{className:"file-selector-div",style:{display:"none"}},a.createElement("input",i({id:"upload",type:"file",accept:this.props.fileType,onChange:e=>{this.props.onChange&&this.props.onChange(e,{inputElem:this.inputElem,onFileUploadCB:this.onFileUploadCB,onErrorCB:this.onErrorCB,imgFor:this.imgFor})},onClick:e=>{e.stopPropagation(),e.target.value=null,this.props.onClick&&this.props.onClick(e)},ref:e=>this.inputElem=e},e)))}}const r=n},1122:(e,t,o)=>{o.d(t,{A:()=>l});var a=o(96540),i=o(8282),s=o(61225);function n(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var a=o.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class r extends a.Component{constructor(e){super(e),n(this,"selectColor",((e,t)=>{e.stopPropagation(),this.setState({selectedColor:t.COLOUR_ID})})),n(this,"changeWebHeaderColor",(e=>{this.props.updateHeaderPallateId({colorId:this.state.selectedColor})})),this.state={selectedColor:this.props.selectedColor}}componentDidMount(){this.props.themeColorList||this.props.fetchHeaderColorData()}componentWillReceiveProps(e,t){this.props.selectedColor!=e.selectedColor&&this.setState({selectedColor:e.selectedColor})}render(){const e=this.props.themeColorList||[];if(!e.length)return null;const t=e.map((e=>a.createElement("div",{className:"pull-left margin5 ng-scope",style:{width:45},key:e.COLOUR_ID,onClick:t=>this.selectColor(t,e)},a.createElement("div",{className:"selected-theme-circle"},a.createElement("div",{style:{backgroundColor:e.COLOUR_CODE},className:"color-container",title:e.COLOUR_NAME}),a.createElement("div",{style:{backgroundColor:e.SEC_COLOUR_CODE},className:"quarter-circle"}),this.state.selectedColor==e.COLOUR_ID&&a.createElement("img",{src:"/mpstatic/jd-angular/client/images/tickMark.svg"})))));return a.createElement("div",{className:"customise-header-color  ".concat(this.props.class||"")},a.createElement("div",{className:"popover background-color-popover show"},a.createElement("div",{className:"popoverHead"},a.createElement("p",null,"Color Palette")),a.createElement("div",{class:"popover-content"},t),a.createElement("div",{className:"popoverFooter"},a.createElement("div",{className:"buttonHolder"},a.createElement("button",{className:"btn apply-btn btn-sm",onClick:this.changeWebHeaderColor},"Apply")))))}}const l=(0,s.Ng)(((e,t)=>({...t,themeColorList:e.cmsInfo.headerColorData,selectedColor:e.cmsInfo.selectedHeaderColor})),{fetchHeaderColorData:i.XT,updateHeaderPallateId:i.pf},null,{forwardRef:!0})(r)},2521:(e,t,o)=>{o.d(t,{A:()=>i});var a=o(96540);function i(e){const t=e.value,o=t/e.max,i=e.filColor?e.filColor:"rgb(255,255,255)",s=e.trackColor?e.trackColor:"rgb(84,84,84)",n={backgroundImage:"-webkit-gradient(linear, 0% 0%, 100% 0%, color-stop(".concat(o,", ").concat(i,"), color-stop(").concat(o,", ").concat(s,"))")};return a.createElement("div",{className:"input-range-slider"},e.hideLabel?null:a.createElement("div",{className:"trans-div display-flex padding-bottom-10"},a.createElement("span",{className:"trans-text",style:{flex:1}},e.label),e.showInput?a.createElement("input",{className:"pull-right range-input",type:"number",value:t,onChange:e.onChange,readOnly:e.readOnlyInput}):a.createElement("span",{className:"pull-right range-val",type:"text"},t)),a.createElement("input",{id:"textColorPicker",className:"TransparencySlider",type:"range",min:e.min,max:e.max,step:e.step,value:t,onChange:e.onChange,style:n,"body-scroll-lock-ignore":"true"}))}i.defaultProps={label:"Add Transparency",showInput:!1,min:"0",max:"10",step:"0.1",readOnlyInput:!1}},52110:(e,t,o)=>{o.d(t,{A:()=>u}),o(35890),o(9087);var a=o(96540),i=o(84571),s=o(1122),n=o(57634),r=o(71255),l=o(23858),c=o(13244),p=o(61225),d=o(52575);const m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";return t=e.left>window.innerWidth/2||e.right<window.innerWidth/2?"left":"right",t},h={visibleKey:!1,style:null,class:""},g=e=>{const[t,o]=(0,a.useState)(e.style),[p,d]=(0,a.useState)({...h});let u=null;const[C,v]=(0,a.useState)(!1),[b,y]=(0,a.useState)(!1);(0,a.useLayoutEffect)((()=>{p.visibleKey&&d({...h});let a={...e.style};const i=document.body.scrollHeight;u.offsetHeight+a.top+20>=i?(a.top="unset",a.bottom=20,o(a)):e.style!=t&&o(e.style);const s=Math.min(window.innerWidth,1366);let n=0;if(s>=1366&&(n=(window.innerWidth-1366)/2),e.isMobile?(a.bottom="0",o(a)):e.style&&s+n<=e.style.left+u.offsetWidth&&(a.left-=u.offsetWidth,o(a)),e.isMobile||"header"!=e.blockUnderEdit||-1!=e.blockKey.indexOf("staticHTML"))return;if("fixed"==a.position)return;const r=a.top-$(e.$element).offset().top,l=t=>{let i={...a};i.top=$(e.$element).offset().top+r,$(e.$element).is(":visible")?i.display=e.style.display:i.display="none",o(i)};return $(".webheader").on("transitionend.cmsDropDown webkitTransitionEnd.cmsDropDown oTransitionEnd.cmsDropDown",l),$(document).on("scroll.cmsDropDown headerSticky.cmsDropDown",l),()=>{$(document).off("scroll.cmsDropDown headerSticky.cmsDropDown"),$(".webheader").off("transitionend.cmsDropDown webkitTransitionEnd.cmsDropDown oTransitionEnd.cmsDropDown")}}),[e.style]),(0,a.useEffect)((()=>{e.isMobile&&u&&u.addEventListener("touchmove",(e=>{e.preventDefault()}))}),[]);const w=e.isMobile&&"featuredProd"==e.blockType&&e.$element.className&&e.$element.className.includes("cart-empty"),x={uploadImage:{text:e.isMobile?"Gallery":"Upload Image",icon:"icon-upload",class:"upload-image",noTimeout:!0},gallery:{text:"Gallery",icon:"icon-upload",class:"upload-image",noTimeout:!0},addFromLink:{text:"Add From Link",icon:"icon-linkURL",class:"add-image"},addLink:{text:"Add Link",icon:"icon-linkNew",class:"add-link"},editLink:{text:"Edit Link",icon:"icon-linkNew",class:"add-link"},editText:{text:"Edit Text",icon:"icon-textEdit",class:"edit-text"},editSearchText:{text:"Edit Search Text",icon:"icon-textEdit",class:"edit-text"},takeNewPhoto:{text:"Camera",icon:"icon-camera",class:"add-image"},camera:{text:"Camera",icon:"icon-camera",class:"add-image"},myImages:{text:"My Images",icon:"icon-myImages",class:"my-image"},imageLibrary:{text:"Image Library",icon:e.isMobile?"icon-imageLibrary":"icon-libraryNew",class:"image-library"},searchProduct:{text:"Search Products",icon:"icon-search",class:"search-product"},searchBarSettings:{text:"Search Settings",icon:"icon-setting",class:"search-bar-setting"},fontStyle:{text:e.isMobile?"Change Font":"Font Style",icon:"icon-textEdit",class:"font-style"},searchSettings:{text:"Search Settings",icon:"icon-settingSM",class:"search-settings"},viewImage:{text:"View Image",icon:"icon-show",class:"view-image"},deleteImage:{text:"Delete Image",icon:"icon-bin",class:"delete-image"},sortGalleryImages:{text:"Sort Gallery",icon:"icon-sort",class:"sort-image"},sortMarqueeImages:{text:"Sort Images",icon:"icon-sortNew",class:"sort-image"},cropImage:{text:"Crop Image",icon:"icon-crop",class:"crop-image"},goToLink:{text:w?"Add To Cart":"Go to Link",icon:w?"icon-glCart":"icon-GoTo",class:"image-go-to-link",additionalClass:"go-to-link"},changeImageStyle:{text:"Change Styling",icon:"icon-magicWand",class:"change-img-style"},backgroundStyle:{text:"Background Style",icon:"icon-magicWand",class:"change-img-style"},changeTextStyle:{text:"Change Styling",icon:"icon-magicWand",class:"change-text-style",additionalClass:"change-product-style"},changeInputStyle:{text:"Change Styling",icon:"icon-magicWand",class:"change-input-style"},imageSeo:{text:"SEO",icon:"icon-googleSeo icon-seo",class:"image-seo"},addBannerImage:{text:"Add New Banner",icon:"icon-pluseLine",rightIcon:e.isMobile?"":"icon-pagination-right",class:"add-new-banner",childDropdown:g,childListOptions:["uploadImage","addFromLink","myImages","imageLibrary"]},addBackgroundImage:{text:"Add Background Image",icon:"icon-pluseLine",rightIcon:e.isMobile?"":"icon-pagination-right",class:"add-background",childDropdown:g,childListOptions:["uploadImage","addFromLink","myImages","imageLibrary"]},editBackgroundImage:{text:"Edit Background Image",icon:"icon-edit",rightIcon:e.isMobile?"":"icon-pagination-right",class:"edit-background"},addBannerImageMobile:{text:"Add Mobile View",icon:"icon-errorNew color-red",class:"crop-image",childDropdown:g,childListOptions:["uploadImageBanner","addFromLinkBanner","myImagesBanner","imageLibraryBanner"]},uploadImageBanner:{text:e.isMobile?"Gallery":"Upload Image",icon:"icon-upload",class:"upload-image",noTimeout:!0},addFromLinkBanner:{text:"Add From Link",icon:"icon-linkURL",class:"add-image"},myImagesBanner:{text:"My Images",icon:"icon-myImages",class:"my-image"},imageLibraryBanner:{text:"Image Library",icon:e.isMobile?"icon-imageLibrary":"icon-libraryNew",class:"image-library"},addBannerImageWeb:{text:"Add Website View",icon:"icon-errorNew color-red",rightIcon:"icon-pagination-right",class:"crop-image",childDropdown:g,childListOptions:["uploadImageBanner","addFromLinkBanner","myImagesBanner","imageLibraryBanner"]},changeBlockImage:{text:"Change Image",icon:"icon-uploadImage",class:"change-block-image",childDropdown:g,childListOptions:["uploadImage","addFromLink","myImages","imageLibrary"]},changeImageProdListing:{text:"Change Image",icon:"icon-myImages",rightIcon:e.isMobile?"":"icon-pagination-right",noTimeout:!0,class:"change-block-image"},linkBlockImage:{text:"Link Image",icon:"icon-linkURL",class:"link-block-image"},editLinkBlockImage:{text:"Edit Image Link",icon:"icon-linkURL",class:"edit-link-image"},linkBannerImage:{text:"Link Image",icon:"icon-linkURL",class:"link-image"},sortBannerImage:{text:"Sort Banner",icon:"icon-sort",class:"sort-image"},animate:{text:"Animate",icon:"icon-animationLine",class:"setting-image animation-option"},backgroundAnimation:{text:"Background Animation",icon:"icon-animationLine",class:"setting-image animation-option"},bannerImageSettings:{text:"Settings",icon:"icon-setting",class:"setting-image"},editLinkBannerImage:{text:"Edit Link",icon:"icon-linkURL",class:"add-image"},getDirection:{text:"Get Direction",icon:"icon-direction",class:""},editMap:{text:"Edit Map",icon:"icon-textEdit",class:""},editProductImage:{text:"Edit Image",icon:"icon-image",class:"add-image"},changeImage:{text:"Change Image",icon:"icon-image",class:"add-image"},editProductName:{text:"Edit Name",icon:"icon-edit",class:"edit-product-name",additionalClass:"edit-product-name"},editProductPrice:{text:"Edit Product Price",icon:"icon-box",class:"edit-product-price",additionalClass:"edit-product-price"},sortProducts:{text:"Sort Product / Service",icon:"icon-sortNew",class:"add-image"},sortCategories:{text:"Sort Categories",icon:"icon-sort",class:"add-image"},editCategories:{text:"Edit Categories",icon:"icon-categoryRight",class:"add-image"},playVideo:{text:"Play Video",icon:"icon-video",class:"play-video"},editVideo:{text:"Edit Video",icon:"icon-edit",class:"edit-video"},sortVideo:{text:"Sort Video",icon:"icon-sort",class:"sort-video"},deleteVideo:{text:"Delete Video",icon:"icon-trash",class:"delete-video"},deleteOption:{text:"Delete",icon:"icon-trash",class:"delete-option"},colors:{text:"Color",icon:"icon-colourPalletNew",class:"color-option"},colorOption:{text:"Color",icon:"icon-colourPalletNew",class:"color-option"},editSocialLinks:{text:"Edit Social Links",icon:"icon-social",class:"edit-social-links"},changeLogo:{text:"Change Logo",icon:"icon-CompanyLogo",class:"change-logo",childDropdown:window.jdInterface&&!window.jdInterface.isIOSApp?g:null,childListOptions:window.jdInterface&&!window.jdInterface.isIOSApp?["uploadImage"]:[]},uploadLogo:{text:"Upload Logo",icon:"icon-CompanyLogo",class:"upload-logo",childDropdown:window.jdInterface&&!window.jdInterface.isIOSApp?g:null,childListOptions:window.jdInterface&&!window.jdInterface.isIOSApp?["uploadImage"]:[],permissionKey:"CMS.Upload_Logo"},logoColor:{text:"Logo Color",icon:"icon-colourPalletNew",class:"logo-color"},createNewLogo:{text:"Create New Logo",icon:"icon-pencilBrush",class:"create-new-logo"},companyName:{text:"Company Name",icon:"icon-CompanyName",class:"company-name"},changeLogoStyle:{text:"Change Styling",icon:"icon-magicWand",class:"change-logo-style"},manageMenu:{text:"Manage Menu",icon:"icon-menu",class:"manage-menu"},changeStyleMenu:{text:"Change Styling",icon:"icon-magicWand",class:"change-style-menu"},menuLinkSeo:{text:"SEO",icon:"icon-googleSeo icon-seo",class:"menulink-seo"},settings:{text:"Settings",icon:"icon-setting",class:"setting-option"},productSettings:{text:"Settings",icon:"icon-setting",class:"setting-option"},headerImageBGColor:{text:"Image Background Color",icon:"icon-editImage",class:"header-imgBg-color",childDropdown:e.isMobile?null:n.A},headerBGColor:{text:"Header Background Color",icon:"icon-CMSheader",class:"header-bg-color",childDropdown:n.A},headerMobileIconColor:{text:"Icon Color",icon:"icon-colourPalletNew",class:"header-icon-color"},headerMobileSearchIcon:{text:"Colour",icon:"icon-colourPalletNew",class:"header-icon-color"},headerMobileMicColor:{text:"Color",icon:"icon-colourPalletNew",class:"header-icon-color"},headerColorPallete:{text:"Color Palette",icon:"icon-colourPalletNew",class:"header-color-palette",childDropdown:e.isMobile?null:s.A},changeHeader:{text:"Change Header",icon:"icon-CMSEditHeader",class:"change-header"},goToMenu:{text:"Go To Menu",icon:"icon-addLink",class:"go-to-menu",additionalClass:"go-to-link"},goToCart:{text:"Go To Cart",icon:"icon-CKcart",class:"go-to-cart",additionalClass:"go-to-link"},makeACall:{text:"Make a Call",icon:"icon-addLink",class:"make-a-call",additionalClass:"go-to-link"},sortServices:{text:"Sort Services",icon:"icon-sortNew",class:"make-a-call"},sortAmenities:{text:"Sort Amenities",icon:"icon-sortNew",class:"make-a-call"},editService:{text:"Edit Service",icon:"icon-edit",class:"make-a-call"},editAmenity:{text:"Edit Amenity",icon:"icon-edit",class:"make-a-call"},deleteAmenity:{text:"Delete Amenity",icon:"icon-trash"},deleteCartIcon:{text:"Delete Cart Icon",icon:"icon-trash",class:"delete-option hide-div-icon",key:"cart-icon-btn"},deleteCallIcon:{text:"Delete Call Icon",icon:"icon-trash",class:"delete-option hide-div-icon",key:"phone-icon-btn",clickedSectionClass:"phoneIcon"},deleteMenuIcon:{text:"Delete Menu Icon",icon:"icon-trash",class:"delete-option hide-div-icon",key:"category-burger-menu"},servicesSettings:{text:"Service Settings",icon:"icon-setting",class:""},addTestimonials:{text:"Add Testimonials",icon:"icon-testimonial",class:""},editTestimonials:{text:"Edit Testimonials",icon:"icon-edit",class:""},sortTestimonials:{text:"Sort Testimonials",icon:"icon-sortNew",class:""},categorySettings:{text:"Category Setting",icon:"icon-setting",class:""},setDefault:{text:"Set as Default",icon:"icon-approved",class:"set-default"},remove:{text:"Remove",icon:"icon-trash",class:""},gotoDetail:{text:"Go to Detail Page",icon:"icon-GoTo",class:"go-to-detail"},addProduct:{text:"Add a Product",icon:"icon-box",class:"add-product"},addService:{text:"Add a Service",icon:"icon-service2",class:"add-service"},inputText:{text:"Input Text",icon:"icon-textEdit",class:"input-text"},changeInputStyle:{text:"Change Styling",icon:"icon-magicWand",class:"change-text-style"},changeColorHolderStyle:{text:"Change Styling",icon:"icon-magicWand",class:"change-text-style"},changeColorHolderImage:{text:"Add Background Image",icon:"icon-pluseLine",class:"change-color-image"},headerBGColorMobile:{text:"Background Color",icon:"icon-CMSheader",class:"header-bg-color"},editColorHolderImage:{text:"Change Image",icon:"icon-edit",rightIcon:e.isMobile?"":"icon-pagination-right",class:"add-image"},addLinkBox:{text:"Add Link",icon:"icon-addLink",class:"add-link"},editLinkBox:{text:"Edit Link",icon:"icon-addLink",class:"add-link"},changeColorHolderAnimation:{text:"Animate",icon:"icon-animationLine",class:"setting-image animation-option"},colorHolderImageDelete:{text:"Delete Image",icon:"icon-trash",class:"delete-image"},colorHolderDelete:{text:"Delete Section",icon:"icon-trash",class:"add-image"},copyStyling:{text:"Copy Styling",icon:"icon-copyStyle",class:"copy-style"},pasteStyling:{text:"Paste Styling",icon:"icon-pasteStyle",class:"paste-style ".concat(e.isPasteAvailable?"active":"")},addYoutube:{text:"Add Youtube Link",icon:"icon-youtubeNewCircle",class:"add-ytb-link"},addFacebook:{text:"Add Facebook Link",icon:"icon-fbCircle",class:"add-fb-link"},addInstagram:{text:"Add Instagram Link",icon:"icon-instaCircle",class:"add-insta-link"},addVimeo:{text:"Add Vimeo Link",icon:"icon-vimeoCircle",class:"add-vimeo-link"},textSeo:{text:"SEO",icon:"icon-googleSeo icon-seo",class:"text-seo"},settingsColorOption:{text:"Color",icon:"icon-colourPalletNew",class:"color-option",childDropdown:n.A},searchProductByBarcode:{text:"Search Product By Barcode",icon:"icon-barcode",class:"barocde-option"},editBannerImage:{text:"Edit Banner",icon:"icon-image",class:"edit-banner"},editGalleryImage:{text:"Edit Image",icon:"icon-image",class:"edit-gallery"},sortRestMenu:{text:"Sort Menu",icon:"icon-sortNew",class:"sort-restMenu"},editRestMenu:{text:"Edit Menu",icon:"icon-edit",class:"edit-restMenu"},editRestSubMenu:{text:"Edit Sub Menu",icon:"icon-edit",class:"edit-restSubMenu"},editRestItem:{text:"Edit Item / Dish",icon:"icon-edit",class:"edit-restItem"},sortRestItem:{text:"Sort Item / Dish",icon:"icon-sortNew",class:"sort-restItem"},viewWishList:{text:"View Wishlist",icon:"icon-heartLine",class:""},marqueeSettings:{text:"Settings",icon:"icon-setting",class:""},iconSettings:{text:"Icon Settings",icon:"icon-settingSM",class:""},jdImages:{text:"Jd Images",icon:"icon-jdLogo",class:""}};e.isAdminThemeUser||["addBannerImage","addBackgroundImage","addBannerImageMobile","addBannerImageWeb","changeBlockImage"].forEach((e=>{var t;x&&null!==(t=x[e])&&void 0!==t&&null!==(t=t.childListOptions)&&void 0!==t&&t.length&&x[e].childListOptions.push("jdImages")}));const f=(t,o)=>{if(-1==["goToLink","gotoDetail","goToCart","marqueeSettings"].indexOf(o)&&t.stopPropagation(),e.hideEditTooltip&&e.hideEditTooltip(),x[o].childDropdown)if(p.visibleKey==o)d({...h});else{let a={left:"calc(100% + 20px)",right:"unset"},i="";if(-1!=["headerBGColor","headerImageBGColor","headerColorPallete"].indexOf(o)){a={},i="jd-right-child";const e=$(t.target).closest(".popover-content");e.offset().left+e.width()+450>document.body.clientWidth&&(i="jd-left-child")}e.dropDownClass.includes("slider-fixed-popup")&&"changeBlockImage"==o&&!e.isMobile&&(a={...a,top:t.target.getBoundingClientRect().top-15+"px"}),d({visibleKey:o,style:a,class:i})}else d({...h}),e.dropDownOptionClickHandler(t,o)},I=t=>{t.stopPropagation(),e.hidePopover&&e.hidePopover()};let k=e.listOptions;e.isMobile&&(0,c.d_)(k);const E=e.headerOption||{},D=k.map(((o,s)=>{let n=x[o];e.listOptionsObj&&e.listOptionsObj[o]&&(n={...n,...e.listOptionsObj[o]});const l=!(!n.hasOwnProperty("permissionKey")||!n.permissionKey)&&(e=>{const t=(0,c.md)(e);return!!(t&&t.hasOwnProperty("status")&&["PREMIUM","LIMITED"].includes(t.status))})(n.permissionKey);let d=a.createElement(a.Fragment,null,a.createElement("i",{className:n.icon}),a.createElement("span",{className:"dropdown-text ".concat(l?"premium-btn-text":"")},n.text),l?a.createElement("img",{src:"https://image1.jdomni.in/jdomni_email/Preium20_2008261653.png",className:"premium-patch premium-long-img",style:{maxWidth:"66px"}}):null,"image-seo"==n.class||"text-seo"==n.class?a.createElement("i",{className:"icon-bullet-filled"}):null);d=-1!=["goToLink","gotoDetail","goToCart"].indexOf(o)&&(e.linkObj||e.customLinkObj)?a.createElement(i.A,{linkObj:e.linkObj||e.customLinkObj,linkHolderClass:"custom-link ".concat(n.additionalClass||""),parentProps:{history:e.history,pageName:e.pageName}},d):a.createElement("a",{className:"custom-link ".concat(n.additionalClass||"")},d);const h=p.visibleKey==o&&n.childDropdown||!1;let g={};if("headerBGColor"==o||"headerImageBGColor"==o){const t="headerBGColor"==o?["HEADER_SECOND_PARTITION","MOBILE_HEADER","HEADER_SECOND_PARTITION_SOLID","MOBILE_HEADER_SOLID"]:["HEADER_PARTITION"];g={style:{color:e.headerColors[t[0]]},popoverPos:p.style,holderClass:"header-section-picker "+p.class,colorFor:"color",showTooltip:!0,colorPicker:{onChange:(o,a)=>{const i="rgba(".concat(o.rgb.r,", ").concat(o.rgb.g,", ").concat(o.rgb.b,", ").concat(o.rgb.a,")"),s=[],n=[];return t.forEach((e=>{-1==e.indexOf("SOLID")?s.push(e):n.push(e)})),e.updateColorScheme({data:[{keyArr:n,value:"rgba(".concat(o.rgb.r,", ").concat(o.rgb.g,", ").concat(o.rgb.b,", 1)")},{keyArr:s,value:i}]})},onClose:e=>{}}}}else if("settingsColorOption"==o){const e={colorFor:"color",color:payload.colourScheme.mobileHeaderColor,colorSchemeKey:["SOCIAL_ICON_HOVER"],showFor:["socialLinks"],style:{},showTooltip:!0,onChange:(e,t)=>{propsObj.updateStyle({[t]:"rgba(".concat(e.rgb.r,", ").concat(e.rgb.g,", ").concat(e.rgb.b,", ").concat(e.rgb.a,")")})},onClose:e=>{updateOpenedTooltip("");let t="rgba(".concat(e.r,",").concat(e.g,",").concat(e.b,",").concat(e.a,")"),o=rgb2hex(t);addUserColor(o),propsObj.updateUserColors([o])}};g={...g,...e}}else e.isMobile&&(0,c.d_)(n.childListOptions),g={isMobile:e.isMobile,listOptions:n.childListOptions,dropDownClass:"".concat(e.dropDownClass," child-popup ").concat(e.isMobile?"":m(t)),dropDownOptionClickHandler:e.dropDownOptionClickHandler,class:p.class,headerOption:e.isMobile?{show:!0,title:"Change Image",leftIconOptions:{iconClass:"icon-pagination-left",clickCB:e=>{}},rightIconOptions:{iconClass:"icon-closeLight",clickCB:t=>{e.hidePopover()}}}:null},e.dropDownClass.includes("slider-fixed-popup")&&"changeBlockImage"==p.visibleKey&&(g.style={top:p.style.top});let u=a.createElement(a.Fragment,null,d,a.createElement("i",{className:"right-icon ".concat(n.rightIcon)}),h&&a.createElement(h,g));return e.isMobile?a.createElement(r.A,{tagName:"div",key:"popover_ripple".concat(s),className:"popover-content cursor-pointer ".concat(n.class," ").concat(""," ").concat(h?"child-dropdown-open":""),onClick:t=>{if(l){if("uploadLogo"==o){let t=(0,c.pc)(e.deviceData);(0,c.Wk)({li:"cms_Companyname",ll:"omni_CMS",source:t,device_id:"Upgrade_Flow"})}return y(n.permissionKey),void(e.deviceData.isIosApp?window.location.href="/myaccount/jd-vendor/upgradeios":e.toggleSliderModal({key:"UpgradeFlowModal",show:!0}))}t.persist(),setTimeout((()=>{f(t,o)}),300)}},u):a.createElement("div",{className:"popover-content cursor-pointer ".concat(n.class," ").concat(""," ").concat(h?"child-dropdown-open":""),onClick:t=>{if(l&&n.permissionKey){if("uploadLogo"==o){let o=(0,c.pc)(e.deviceData);return(0,c.Wk)({li:"cms_Companyname",ll:"omni_CMS",source:o,device_id:"Upgrade_Flow"}),I(t),void(e.deviceData.isIosApp?window.location.href="/myaccount/jd-vendor/upgradeios":e.toggleSliderModal({key:"UpgradeFlowModal",show:!0}))}y(n.permissionKey),v(!0)}else f(t,o)},key:o},u)})),N=e.isMobile?"animate-to-view":"";let S={...t};return e.isMobile&&p.visibleKey&&(S={...S,bottom:"-100%"}),e.isMobile&&k&&k.length<3&&(S={...S,minHeight:"110px"}),a.createElement(a.Fragment,null,a.createElement("div",{className:"popover fs-m image-upload-popup fade in iphoneXPadding ".concat(p.class||""," ").concat(N," ").concat(e.dropDownClass," ").concat(e.isSeoApplied?" green":""),contentEditable:!1,style:S,ref:e=>u=e},a.createElement("div",{className:"arrow"}),a.createElement("div",{className:"full-height"},E.show&&a.createElement("div",{className:"popover-header ".concat(E.headerClass||""),key:"popoverHeader1"},E.leftIconOptions?a.createElement("div",{className:"left-icon",onClick:e=>E.leftIconOptions.clickCB(e)},a.createElement("i",{className:E.leftIconOptions.iconClass})):null,a.createElement("div",{className:"title"},a.createElement("span",null,E.title)),a.createElement("div",{className:"right-icon",onClick:e=>E.rightIconOptions.clickCB(e)},a.createElement("i",{className:E.rightIconOptions.iconClass}))),!E.show&&e.isMobile&&a.createElement("div",{className:"close-icon",onClick:e=>I(e),key:"popoverHeader1"},a.createElement("i",{className:"icon-closeLight"})),D)),C?a.createElement(l.A,{showUpgradeModal:C,setUpgradeModal:v,ackKey:"postAck",permissionKey:b}):null)},u=(0,p.Ng)((e=>({deviceData:e.library.deviceData,isAdminThemeUser:e.staticData.isAdminThemeUser})),{toggleSliderModal:d.Bs})(g)},57634:(e,t,o)=>{o.d(t,{A:()=>v}),o(35890);var a=o(96540),i=o(65189),s=o(2825);const n=e=>a.createElement("div",{className:"color-picker-pointer"}),r=(0,i.kl)((e=>a.createElement("div",{className:"react-color-picker ".concat(e.holderClass||""),style:e.style,onClick:e.onClick},e.showArrow?a.createElement("div",{className:"arrow ".concat(e.childPos?e.childPos+"-side":"")}):null,a.createElement("div",{className:"header-div"},"Select Color"),a.createElement("div",{className:"wrapper-divs"},a.createElement("div",{className:"left-wrapper"},a.createElement("div",{className:"color-list-div"},a.createElement("div",{className:"my-color-header"},"My Colors"),(()=>{let t=[];return e.colorList.map((o=>{if(o.length<3)return;let i=!1;e.hex&&o&&(i=e.hex.toLowerCase()==o.toLowerCase()),t.push(a.createElement("div",{style:{backgroundColor:o},className:"color-swatch-div ".concat(i?"active":""),onClick:()=>e.onApplyColor(o)},i&&a.createElement("i",{className:"icon-clickNew sel-color"})))})),a.createElement(a.Fragment,null,t)})()),a.createElement("div",{className:"pos-rel",style:{marginTop:"20px"}},a.createElement("div",{className:"sub-header"},a.createElement("div",null,"Transparency"),a.createElement("input",{value:parseFloat((10*(1-e.color.a)).toPrecision(2)),min:0,max:10,step:.1,precision:2,type:"number",className:"trans-div-input",onChange:t=>{let o=t.target.value||0;o=parseFloat((1-o/10).toPrecision(3));let a={...e.color};a.a=o,e.onChange(a)}})),a.createElement("div",{className:"alpha-wrapper"},a.createElement(s.ry,{rgb:e.color.rgb||e.color,hsl:e.color.hsl||e.hsl,pointer:n,onChange:e.onChange})))),a.createElement("div",{className:"right-wrapper"},a.createElement("div",{className:"sat-hue-container"},a.createElement("div",{className:"st-wrapper"},a.createElement(s.VI,{hsl:e.color.hsl||e.hsl,hsv:e.color.hsv||e.hsv,pointer:n,onChange:e.onChange})),a.createElement("div",{className:"hue-wrapper"},a.createElement(s.RG,{hsl:e.color.hsl||e.hsl,direction:"vertical",pointer:n,onChange:e.onChange}))),a.createElement("div",{className:"input-check-cont"},a.createElement("div",{className:"input-wrapper"},a.createElement(s.jc,{label:"Selected Color",value:e.hex,onChange:t=>e.onChange(t["Selected Color"]),style:{input:{border:"none",padding:"5px",margin:"5px 0 0",width:"80%",background:"#666666",color:"#ffffff"},label:{fontSize:"12px",color:"#999"}}})),a.createElement("div",{className:"check-wrapper"},a.createElement("div",{style:{zIndex:2,backgroundColor:"rgba(".concat(e.color.r,",").concat(e.color.g,",").concat(e.color.b,",").concat(e.color.a,")"),position:"absolute",top:"0",left:"0",right:"0",bottom:"0"}}),a.createElement(s.xu,{white:"#fff",grey:"#333"}))))),a.createElement("div",{className:"footer-div"},a.createElement("button",{className:"apply-custom-btn",onClick:()=>e.onApplyColor()},"Apply"))))),l=e=>a.createElement("div",{className:"color-picker-pointer"}),c=(0,i.kl)((e=>a.createElement(a.Fragment,null,a.createElement("div",{className:"color-pallete-backdrop",onClick:e.onClick}),a.createElement("div",{className:"color-pallete-modal",onClick:e.onClick},a.createElement("div",{className:"react-color-picker-mobile ".concat(e.holderClass||""),style:e.style,onClick:e.onClick},a.createElement("div",{className:"st-wrapper"},a.createElement(s.VI,{hsl:e.color.hsl||e.hsl,hsv:e.color.hsv||e.hsv,pointer:l,onChange:e.onChange})),a.createElement("div",{className:"check-hue-alpha-container"},a.createElement("div",{className:"check-wrapper"},a.createElement("div",{style:{zIndex:2,backgroundColor:"rgba(".concat(e.color.r,",").concat(e.color.g,",").concat(e.color.b,",").concat(e.color.a,")"),position:"absolute",top:"0",left:"0",right:"0",bottom:"0"}}),a.createElement(s.xu,{white:"#fff",grey:"#333"})),a.createElement("div",{className:"hue-alpha-container"},a.createElement("div",{className:"hue-wrapper"},a.createElement(s.RG,{hsl:e.color.hsl||e.hsl,pointer:l,onChange:e.onChange})),a.createElement("div",{className:"alpha-wrapper"},a.createElement(s.ry,{rgb:e.color.rgb||e.color,hsl:e.color.hsl||e.hsl,pointer:l,onChange:e.onChange})))),a.createElement("div",{className:"input-wrapper"},a.createElement(s.jc,{label:"",value:e.hex,onChange:t=>e.onChange(t),style:{input:{border:"1px solid rgba(216, 216, 216, 0.38)",color:"rgb(51, 51, 51)",borderRadius:"4px",boxShadow:"rgb(218, 218, 218) 0px 0px 0px 1px inset",height:"45px",fontSize:"18px",textAlign:"center",width:"100%"},label:{fontSize:"12px",color:"#999"}}})),a.createElement("div",{className:"footer-div"},a.createElement("div",{className:"cancel-btn custom-btn",onClick:()=>e.onApplyColor()},"Cancel"),a.createElement("div",{className:"save-btn custom-btn",onClick:()=>e.onApplyColor()},"Save")))))));var p=o(61225),d=o(56347),m=o(21871),h=o(3660);function g(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var a=o.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const u=e=>{const[t,o,a]=e.match(/\w\w/g).map((e=>parseInt(e,16)));return{r:t,g:o,b:a,a:1}};class C extends a.Component{constructor(e){super(e),g(this,"getColor",(e=>{let t=e.selectedColor||e.style&&e.style[e.colorFor],o={r:"84",g:"84",b:"84",a:"0"};if(t&&-1===t.indexOf("#")){let e=t.replace(/[a-z()]/g,"").trim().split(",");o={r:e[0],g:e[1],b:e[2],a:e[3]||1}}else t&&(o=u(t));return o})),g(this,"handleClose",(()=>{this.props.colorPicker.onClose&&this.props.colorPicker.onClose(this.state.color),this.setState({displayColorPicker:!1})})),g(this,"handleChange",(e=>{this.props.colorPicker.onChange&&this.props.colorPicker.onChange(e,this.props.colorFor),this.props.themeModificationStatus({isThemeModified:!0}),this.setState({color:{...e.rgb,hsl:e.hsl,hsv:e.hsv}})})),g(this,"onApplyColor",(e=>{e?this.handleChange({rgb:u(e)}):this.props.isMobile?h.A.closeCurrent():this.handleClose(),console.log("Apply")})),this.state={displayColorPicker:e.showTooltip||!1,color:this.getColor(e)},this.colorList=[...e.userColors||[],"#CA2121","#7E1515","#D5F200","#F9F9F9","#B0F8FD","#FFFFFF","#FECF9C","#E3A2FC","#FDF39B","#A3FFAE","#C9C9C9","#FFBABD","#B4FDD1","#B6B6B6","#C1D4FD","#FE83A8","#E64C3D","#E67D22","#EFC20D","#8BC249","#2DCC70","#19BB9A","#D62941","#673BB7"],this.colorList=Array.from(new Set(this.colorList)),this.colorList.length=24}componentDidMount(){this.props.isMobile&&(h.A.pushState(this.props.history,"colorPicker"),h.A.addBackHandler("colorPicker",this.handleClose))}componentDidUpdate(e){(e.style&&this.props.style[this.props.colorFor]!=e.style[e.colorFor]||e.selectedColor!=this.props.selectedColor)&&this.setState({color:this.getColor(this.props)})}componentWillUnmount(){this.props.isMobile&&h.A.removeBackHandler("colorPicker",this.handleClose)}render(){const e={position:"absolute",zIndex:"2",top:"40px"};this.props.childPos&&(e["left"==this.props.childPos?"right":"left"]="100px");const t=this.props.popoverPos||e;let o=r;return this.props.isMobile&&(o=c),a.createElement(a.Fragment,null,this.state.displayColorPicker?a.createElement(o,{color:this.state.color,onChange:this.handleChange,onApplyColor:this.onApplyColor,colorList:this.colorList,style:t,childPos:this.props.childPos,holderClass:this.props.holderClass,onClick:e=>e.stopPropagation(),showArrow:this.props.showArrow}):null)}}const v=(0,p.Ng)(((e,t)=>({...t,...e.contentBlockInfo,...e.cmsInfo})),{themeModificationStatus:m._0})((0,d.y)(C))},2571:(e,t,o)=>{o.d(t,{A:()=>y});var a=o(96540),i=o(76142),s=o(76642),n=(o(35890),o(52110)),r=o(81228),l=o(13244),c=o(81758);const p=e=>{const[t,o]=(0,a.useState)(!1),i=(0,a.useRef)(null);(0,a.useEffect)((()=>{e.hideDropDown&&t&&o(!1)}));const s=["uploadImage","addFromLink","myImages","imageLibrary"];return e.isMobile&&(0,l.d_)(s),a.createElement("div",{className:"upload-another-image cropper-btn  changeImage",onClick:a=>{e.onClick&&e.onClick(a),a.stopPropagation(),o(!t)}},a.createElement("div",{className:"upload-image-btn"},a.createElement("i",{className:"icon-uploadImage jd-font-inherit jd-color-inherit font-10"}),a.createElement("span",{className:"btn-with-text upload-image"},e.isMobile?"Change":"Change Image")),t&&a.createElement(n.A,{isMobile:e.isMobile,listOptions:s,hidePopover:()=>o(!1),dropDownClass:"black-popover cropper-popover",dropDownOptionClickHandler:(t,a)=>{switch(a){case"uploadImage":case"takeNewPhoto":!window.jdInterface||window.jdInterface.isIOSApp?i.current.triggerClick({onFileUploadCB:e.onFileUploadCB}):(0,l.fH)("takeNewPhoto"==a?"CAMERA":"GALLERY","",{callback:e.onChangeImage});break;case"addFromLink":case"myImages":case"imageLibrary":const t={addFromLink:{selectedTab:"urlMode",headerTitle:"Add Image from URL"},myImages:{selectedTab:"myImages",headerTitle:"Change Image"},imageLibrary:{selectedTab:"library",headerTitle:"Change Image"}};(0,l.um)({imageUploadObj:t[a],uploadType:"fromCropper",type:e.type,imgFor:e.imgFor,callback:function(t){e.onChangeImage(t)}})}o(!1),e.toggleImagePopup(t,!0)}}),a.createElement(r.A,{onChange:(t,a)=>{let{inputElem:i,onFileUploadCB:s}=a;if(t.target.files.length>1);else{let a=t.target.files[0],s=i.value.split(".").pop().toLowerCase();o(!1),e.toggleImagePopup(t,!0),(0,c.Td)(a)&&(0,c.YI)(a).then((t=>{e.onChangeImage({originalImageUrl:t,file:a,uploadFrom:"system",extension:s})}))}},ref:i}))};class d extends a.Component{constructor(e){var t,o,a;super(e),t=this,a=(e,t)=>{let o=e.target.value,a=e.target.value,i=1;"width"==t?(i=o/this.props.imageData.naturalWidth,a=(this.props.imageData.naturalHeight*i).toFixed(2)):"height"==t&&(i=a/this.props.imageData.naturalHeight,o=(this.props.imageData.naturalWidth*i).toFixed(2)),this.setState({width:o,height:a})},(o=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var a=o.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(o="handleChange"))in t?Object.defineProperty(t,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[o]=a,this.state={width:e.width,height:e.height}}render(){return a.createElement("div",{className:"popover fade in height-width-input img-crop-pop  dark-gray-pop no-bdrs bottom show"},a.createElement("div",{className:"arrow"}),a.createElement("div",{className:"popover-content"},a.createElement("div",{className:"inline-table"},a.createElement("div",{className:"input-div"},a.createElement("div",null,a.createElement("img",{src:"https://image1.jdomni.in/jdomni_email/linkto.png"})),a.createElement("div",null,a.createElement("div",{className:"align-inputs"},a.createElement("span",null,"Width:"),a.createElement("input",{type:"text",value:this.state.width,onChange:e=>this.handleChange(e,"width")}),a.createElement("span",null,"Pixels")),a.createElement("div",{className:"align-inputs"},a.createElement("span",null,"Height:"),a.createElement("input",{type:"text",value:this.state.height,onChange:e=>this.handleChange(e,"height")}),a.createElement("span",null,"Pixels")))),a.createElement("div",{className:"save-cancel-div"},a.createElement("div",{className:"btn save-cancel-button",onClick:e=>this.props.onCancel(e)},"Cancel"),a.createElement("div",{className:"btn save-cancel-button save-btn",onClick:e=>this.props.onSet(e,this.state)},"Set")))))}}var m=o(73862),h=(o(3660),o(52524)),g=o(2521);function u(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var a=o.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const C=["jpeg","png","jpg","webp"];for(var v=0;v<C.length;v++){var b=C[v];C.length,b.toUpperCase()}class y extends a.Component{constructor(e){super(e),u(this,"fitImageInCropper",(()=>{const e=this.reactCropper;var t=1;const o=this.props.data[0]||{};var a=e.getCropBoxData(),i=a.height/a.width,s=e.getCanvasData(),n=s.naturalHeight/s.naturalWidth;if(a.height>500){const t=500/a.height,o={...a};a.height=400,a.width=t*a.width*.8,a.left-=(a.width-o.width)/2,a.top-=(a.height-o.height)/2,e.setCropBoxData(a)}if(i<n?(s.width=a.width,t=s.width/s.naturalWidth,s.height=s.naturalHeight*t):(s.height=a.height,t=s.height/s.naturalHeight,s.width=s.naturalWidth*t),"ogImage"==o.imgFor){const e=this.reactCropper.getImageData(),o=e.naturalWidth>512||e.naturalHeight>512;t=o?t:1,this.setState({setCropBoxInCenter:o})}if(this.state.fixedCropBoxSize){var r=e.getContainerData();const t=o.imageWidth||this.state.imageWidth,a=o.imageHeight||this.state.imageHeight;e.setCropBoxData({width:t,height:a,left:(r.width-t)/2,top:(r.height-a)/2})}e.zoomTo(t)})),u(this,"unmountCropper",(()=>{this.reactCropper&&this.reactCropper.componentWillUnmount(),this.setState({src:""}),this.props.isMobile&&history.state&&"mobileCropper-slider"==history.state.state||this.props.resetCropperData()})),u(this,"handleCropperBackBtn",(()=>{})),u(this,"setCropBoxInCenter",(()=>{if(this.state.setCropBoxInCenter){const a=this.props.data[0]||{},i=this.reactCropper;var e=i.getContainerData(),t=a.imageWidth||this.state.imageWidth,o=a.imageHeight||this.state.imageHeight;let s=i.getCanvasData();const n={width:t,height:o,left:(e.width-t)/2,top:(e.height-o)/2};i.setCropBoxData(n);let r=i.getCanvasData();const l=r.width/r.height;if(l>1){const o=r.top-n.top;r.height=n.width/l,r.top=n.top+o+(s.height-r.height)/2,r={...r,width:t,left:(e.width-t)/2}}else{const t=r.left-n.left;r.width=n.height*l,r.left=n.left+t+(s.width-r.width)/2,r={...r,height:o,top:(e.height-o)/2}}i.setCanvasData(r)}})),u(this,"validateUrl",(()=>{var e="";if(e=-1!=option.url.indexOf("data:")?option.url.split(";")[0].split(":")[1].split("/").pop():(e=option.url.split(".").pop().toLowerCase()).split("?")[0],-1==C.indexOf(e))return!1})),u(this,"setPopoverPosition",(()=>{const e=Math.min(.2*window.innerHeight),t=Math.max(.2*window.innerHeight);let o=this.reactCropper.getCropBoxData().top-60,a=window.innerHeight-(this.reactCropper.getCropBoxData().height+this.reactCropper.getCropBoxData().top+60);o<0&&(o=e),a>window.innerHeight&&(a=t),this.setState({popoverPos:{top:o,bottom:a}})})),u(this,"onCropperReady",(()=>{if($(this.reactCropper.img).on("zoom.cropper",(e=>{this.updateImageDimension()})),this.props.data[0].src==this.state.src&&(this.updateImageDimension(),this.setCropperData()),!this.prefWidth){const e=this.reactCropper.getImageData();this.prefWidth=e.naturalWidth,this.prefHeight=e.naturalHeight}this.setCropBoxInCenter(),this.setState({isCropperReady:!0,showLoader:!1}),this.props.isMobile?(this.handleCropperBackBtn(),this.dragBoxTouchPrevent(),this.cropBoxTouchPrevent(),this.calculateZoomLevel()):this.setPopoverPosition()})),u(this,"calculateZoomLevel",(()=>{const e=this.reactCropper.getCanvasData();let t=e.width/e.naturalWidth||1;t=+parseFloat(t).toFixed(2),this.setState({zoomLevel:t})})),u(this,"dragBoxTouchPrevent",(()=>{this.reactCropper.cropper.dragBox&&this.reactCropper.cropper.dragBox.addEventListener("touchstart",(e=>{e.preventDefault()}))})),u(this,"cropBoxTouchPrevent",(()=>{this.reactCropper.cropper.cropBox&&this.reactCropper.cropper.cropBox.addEventListener("touchstart",(e=>{e.preventDefault()}))})),u(this,"flipImage",(e=>{if("vertically"==e){let e=-1;this.state.flipXApplied&&(e=1),this.reactCropper.scaleY(e),this.setState({flipXApplied:-1==e})}else{let e=-1;this.state.flipYApplied&&(e=1),this.reactCropper.scaleX(e),this.setState({flipYApplied:-1==e})}})),u(this,"setCropperData",(()=>{const e=this.reactCropper,t=this.props.data[0];var o=0,a=e.getCropBoxData();if(!t.cropperData)return this.fitImageInCropper();var i=e.getData();if(t.cropperData.x=i.x,t.cropperData.y=i.y,e.setData(t.cropperData),-1==t.cropperData.scaleX&&this.flipImage(),-1==t.cropperData.scaleY&&this.flipImage("vertically"),t.canvasData){var s=e.getCanvasData(),n=t.canvasData,r=n.width-s.width,l=n.left;n.left=s.left-r/2,o=l-n.left;var c=t.cropBoxData;if(c){var p=c.top-a.top;n.top-=p}e.setCanvasData(n)}if(t.cropBoxData){if(t.cropBoxData.height>500){const e=500/t.cropBoxData.height;t.cropBoxData.height=400,t.cropBoxData.width=e*t.cropBoxData.width*.8}t.cropBoxData.left-=o,t.cropBoxData.top=e.getCropBoxData().top>60?e.getCropBoxData().top:t.cropBoxData.top-p,e.setCropBoxData(t.cropBoxData)}})),u(this,"cropImage",(e=>{e.stopPropagation(),this.saveImageData(this.showNextCropper)})),u(this,"showNextCropper",(()=>{if(this.props.data.length>this.index+1){this.index++;const e=this.props.data[this.index];this.setState({src:e.src,aspectRatio:e.aspectRatio||16/9})}else this.unmountCropper(),this.props.data.filter(((e,t)=>{this.cropperData[t].imgFor=e.imgFor})),this.props.onSave(this.cropperData)})),u(this,"showConfirmSkipModal",(()=>{$(".skip-crop-modal").modal("show")})),u(this,"onSkipCropper",(()=>{this.cropperData[this.index]=null,this.showNextCropper()})),u(this,"saveImageData",(e=>{this.setState({showLoader:!0});const t=this.reactCropper.cropper,o=this.props.data[0];let a=this.cropperData[this.index];const i={imagesrc:t.url,extension:this.state.extension,uploadFrom:this.state.uploadFrom,file:this.state.file};i.relativeImgUrl=this.state.relativeImgUrl||o.imgUrl;let s=t.getCanvasData(),n=t.getCropBoxData();n&&(n.top<s.top||n.left<s.left||n.top+n.height>s.top+s.height||n.left+n.width>s.left+s.width)&&(i.extension="png"),i.image=t.image,/^https?:\/\//.test(t.url||"")||(i.relativeBase64Url=t.url,i.extension=t.url.split(";")[0].split("/")[1]),(0,c.YJ)(t.getCroppedCanvas(),{mimeType:(0,l.ht)(i.extension.toLowerCase()),fromCropper:o.imgFor,cb:(t,i,s,n)=>{this.setState({showLoader:!1}),o.cropperSaveCb?(this.unmountCropper(),o.cropperSaveCb(t,i,s,n)):(a.imgSrc=t,a.cropperId=i,a.originalImageUrl=s,e())},...o,...i,cropperData:t.getData(),canvasData:s,cropBoxData:n,doNotShowToastMessage:this.props.doNotShowToastMessage,key:Date.now()})})),u(this,"closePopup",(e=>{e.stopPropagation(),this.setState({showPopup:!1})})),u(this,"showHidePopup",(e=>{e.stopPropagation(),this.setState((e=>({showPopup:!e.showPopup,hideImagePopup:!0})))})),u(this,"toggleImagePopup",((e,t)=>{e.stopPropagation(),this.setState((e=>({hideImagePopup:t})))})),u(this,"setImageHeight",((e,t)=>{if(this.closePopup(e),0==t.width)return void window.websiteBuilder.showToastMsg({message:"Image Dimensions Cannot be Zero",timing:5e3});const o=this.reactCropper.getImageData();this.reactCropper.zoomTo(t.width/o.naturalWidth)})),u(this,"onChangeImage",(e=>{let{originalImageUrl:t,relativeImgUrl:o="",extension:a,uploadFrom:i,file:s=null}=e;this.setState({src:t,relativeImgUrl:o,extension:a,uploadFrom:i,file:s},(()=>{this.imageChangeLoader()}))})),u(this,"adjustPopoverPos",(()=>{setTimeout((()=>{this.setPopoverPosition()}),100)})),u(this,"imageChangeLoader",(()=>{this.setState({showLoader:!0});const e=()=>{this.imageChangeLoader.t1=setTimeout((()=>{this.setState({showLoader:!1})}),500)},t=this.reactCropper.img;clearTimeout(this.imageChangeLoader.t1),clearTimeout(this.imageChangeLoader.t2),this.imageChangeLoader.t2=setTimeout((()=>{t?t.complete?e():t.onload=e:e(),setTimeout((()=>{this.reactCropper.reset(),this.fitImageInCropper(),this.updateImageDimension(),this.setCropBoxInCenter(),this.adjustPopoverPos()}),100)}))})),u(this,"getImageData",(()=>a.createElement("div",{className:"cropper-btn set-height-width",key:"image-data",onClick:e=>e.stopPropagation()},a.createElement("div",{className:"align-pop"},a.createElement("span",{className:"height-width-span"},"W: ",this.state.imageWidth),a.createElement("span",{class:"height-width-span"},"H: ",this.state.imageHeight),a.createElement("i",{className:"icon-edit jd-font-inherit icon-hover",onClick:e=>this.showHidePopup(e)}),this.state.showPopup&&a.createElement(d,{height:this.state.imageHeight,width:this.state.imageWidth,onCancel:this.closePopup,onSet:this.setImageHeight,aspectRatio:this.state.imageAspectRation,imageData:this.reactCropper.getImageData()}))))),this.index=0;const t=e.data[0];this.state={showCropper:!0,isCropperReady:!1,src:t.src,aspectRatio:t.aspectRatio||16/9,popoverPos:e.isMobile?{}:{top:0,bottom:0},showLoader:!0,flipXApplied:!1,flipYApplied:!1,showPopup:!1,hideImagePopup:!0,imageWidth:t.imageWidth||0,imageHeight:t.imageHeight||0,fixedCropBoxSize:t.fixedCropBoxSize||!1,setCropBoxInCenter:t.setCropBoxInCenter,relativeImgUrl:t.relativeImgUrl||"",extension:t.extension||t.src.split(".").pop().toLowerCase(),uploadFrom:t.uploadFrom||"",file:t.file||null,showRotateOptions:!1,showZoomOptions:!1,zoomLevel:1},this.prefWidth=t.prefWidth||0,this.prefHeight=t.prefHeight||0,this.items=[{key:"flip-horizontally",hoverText:"Flip Horizontally",iconClass:"icon-flipRight",hide:e.isMobile,onClick:(e,t)=>{this.flipImage()}},{key:"flip-vertically",hoverText:"Flip Vertically",iconClass:"icon-flipDown",hide:e.isMobile,onClick:(e,t)=>{this.flipImage("vertically")}},{key:"rotate",hoverText:"Rotate",iconClass:"icon-rotate",onClick:(e,t)=>{this.props.isMobile?this.setState({showRotateOptions:!this.state.showRotateOptions}):this.reactCropper.rotate(90)}},{key:"zoom-in",hoverText:"Zoom In",hide:e.isMobile,iconClass:"icon-zoomIn",onClick:(e,t)=>{this.reactCropper.zoom(.1)}},{key:"zoom-out",hoverText:"Zoom Out",hide:e.isMobile,iconClass:"icon-zoomOut",onClick:(e,t)=>{this.reactCropper.zoom(-.1)}},{key:"zoom-mobile",hoverText:"Zoom",hide:!e.isMobile,iconClass:"icon-zoomIn",onClick:(e,t)=>{this.setState({showZoomOptions:!this.state.showZoomOptions})}},{key:"reset",hoverText:"Reset",iconClass:"icon-refreshNew",onClick:(e,t)=>{this.reactCropper.reset(),this.fitImageInCropper(),this.updateImageDimension(),this.setCropBoxInCenter(),this.adjustPopoverPos()}},{key:"skip",hoverText:"Skip",btnText:"Skip",hide:!e.showSkipBtn,onClick:(e,t)=>{this.showConfirmSkipModal()}}],this.cropperData=[{}]}updateImageDimension(){const e=this;setTimeout((()=>{const t=e.reactCropper.getImageData();e.setState({imageWidth:t.width&&t.width.toFixed(2),imageHeight:t.height&&t.height.toFixed(2),imageAspectRation:t.aspectRatio})}),100)}getCropperBtnMarkup(){const e="mobileLogo"==this.props.data[this.index].imgFor?[]:[a.createElement(p,{onClick:e=>{this.state.showPopup&&this.showHidePopup(e),this.toggleImagePopup(e,!this.state.hideImagePopup)},key:"",cropperSaveCb:this.props.data[this.index].cropperSaveCb,onChangeImage:this.onChangeImage,isMobile:this.props.isMobile,hideDropDown:this.state.showPopup||!this.props.isMobile&&this.state.hideImagePopup,hidePopover:this.props.hidePopover,toggleImagePopup:this.toggleImagePopup,unmountCropper:this.unmountCropper,imgFor:this.props.data[this.index].imgFor}),!this.props.isMobile&&this.getImageData()];return this.items.forEach(((t,o)=>{if(t.hide)return null;e.push(a.createElement("div",{className:"cropper-btn ".concat(t.key),onClick:e=>{e&&e.stopPropagation(),this.props.isMobile&&"rotate"!=t.key&&this.setState({showRotateOptions:!1}),this.props.isMobile&&"zoom-mobile"!=t.key&&this.setState({showZoomOptions:!1}),this.closePopup(e),t.onClick(e,t)},key:t.key},a.createElement("span",{className:"item-icon ".concat(t.iconClass)},t.btnText),a.createElement("span",{className:"display-text"},t.hoverText)))})),e}render(){const e=this.props.data[this.index].titleText,t="system"==this.state.uploadFrom?this.state.src:(0,m.oK)(this.state.src,"","library");return a.createElement(a.Fragment,null,this.state.showLoader?a.createElement(s.A,{className:"display-block image-cropper-loader"}):null,t?a.createElement("div",{className:"react-image-cropper image-cropper",onClick:e=>{e.stopPropagation(),this.toggleImagePopup(e,!0)}},this.props.isMobile&&this.state.showCropper?a.createElement(h.A,{heading:e||"Crop Image",leftIcons:[{className:"icon-HDRback",onClick:()=>{this.setState({showCropper:!1}),this.unmountCropper()}}],rightIcons:[{label:"Save",isText:!0,onClick:e=>this.cropImage(e),className:"text-blue"}],hasBorder:!1}):null,this.state.showCropper&&a.createElement(i.A,{aspectRatio:this.state.aspectRatio,center:!0,cropBoxMovable:!1,cropBoxResizable:!0,className:"cropper-div",dragMode:"move",guides:!0,ref:e=>this.reactCropper=e,rotatable:!0,ready:this.onCropperReady,responsive:!0,scalable:!0,src:t,toggleDragModeOnDblclick:!1,zoomOnWheel:!0,zoomOnTouch:!0,zoomable:!0}),this.state.isCropperReady?a.createElement("div",{className:"react-cropper-toolbar fade in show ".concat(this.props.isMobile?"footer-btn":"popover"),style:{top:this.state.popoverPos.top}},e&&a.createElement("div",{className:"title-text"},e),a.createElement("div",{className:"popover-content cropper-toolbar"},this.state.showRotateOptions?a.createElement("div",{className:"rotate-options btn-markup box-shadow"},a.createElement("div",{className:"cropper-btn",onClick:()=>this.reactCropper.rotate(90)},a.createElement("span",{className:"item-icon icon-rotate"}),a.createElement("span",{className:"display-text"},"Rotate 90")),a.createElement("div",{className:"cropper-btn",onClick:()=>this.flipImage()},a.createElement("span",{className:"item-icon icon-flipRight"}),a.createElement("span",{className:"display-text"},"Flip Horizontal")),a.createElement("div",{className:"cropper-btn",onClick:()=>this.flipImage("vertically")},a.createElement("span",{className:"item-icon icon-flipDown"}),a.createElement("span",{className:"display-text"},"Flip Vertical"))):this.state.showZoomOptions?a.createElement("div",{className:"zoom-options"},a.createElement("div",{className:"zoom-option",onClick:()=>{this.state.zoomLevel<=0||(this.reactCropper.zoom(-.1),this.setState({zoomLevel:this.state.zoomLevel-.1}))}},a.createElement("i",{className:"icon-minus"})),a.createElement("div",{className:"percentage-slider"},a.createElement(g.A,{value:this.state.zoomLevel,onChange:e=>{const t=Number(e.target.value);this.reactCropper.zoom(t-this.state.zoomLevel),this.setState({zoomLevel:t})},label:"",showInput:!0,min:0,max:2,step:"0.1",readOnlyInput:!1,hideLabel:!0})),a.createElement("div",{className:"zoom-option",onClick:()=>{this.state.zoomLevel>=2||(this.reactCropper.zoom(.1),this.setState({zoomLevel:this.state.zoomLevel+.1}))}},a.createElement("i",{className:"icon-plus"}))):a.createElement("div",{className:"rotate-options-overlay"}),a.createElement("div",{className:"btn-markup "+(this.state.showRotateOptions?"rotate-visible":"")+(this.state.showZoomOptions?"zoom-visible":"")},this.getCropperBtnMarkup()),this.props.isMobile?null:a.createElement("div",{className:"btn-parent"},a.createElement("div",{className:"cropper-btn save primary-btn-color",onClick:e=>this.cropImage(e)},a.createElement("span",{className:"save-btn-text"},"Save"))),this.props.isMobile?null:a.createElement("div",{className:"cropper-btn close-btn",onClick:()=>this.unmountCropper()},a.createElement("span",{className:"item-icon icon-closeLight"})))):null,this.state.isCropperReady&&this.prefWidth&&!this.props.isMobile&&a.createElement("div",{class:"popover fade cropper-info in",style:{bottom:this.state.popoverPos.bottom,top:"unset"}},a.createElement("div",{class:"arrow"}),a.createElement("div",{class:"popover-content"},a.createElement("span",null,"Preferred Image Size W: ".concat(this.prefWidth," X H: ").concat(this.prefHeight," Pixels"))))):null,a.createElement("div",{className:"hidden-file-input-div"},a.createElement("input",{type:"file","data-icon":"false",className:"linkingfile filestyle hide",id:"profile-image-input",accept:"image/*"})),this.props.showSkipBtn&&a.createElement(w,{title:"confirm",description:"are you sure",confirmTxt:"Skip",showCancelBtn:!0,onContinue:this.onSkipCropper,modalClass:"skip-crop-modal"}))}}const w=e=>a.createElement("div",{className:"modal fade  jd-popup-modal notranslate ".concat(e.modalClass||""),tabIndex:"-1",role:"dialog","data-keyboard":"true","data-backdrop":"static",style:{zIndex:1050},"aria-hidden":"false"},a.createElement("div",{className:"modal-vertical-alignment-helper"},a.createElement("div",{className:"modal-dialog popup-modal modal-vertical-align-center"},a.createElement("div",{className:"modal-content text-center"},a.createElement("div",{className:"modal-body"},e.title?a.createElement("div",{className:"header"},e.title||""):null,e.title?a.createElement("div",{className:"description"},e.description||""):null),a.createElement("div",{className:"modal-footer txt-center"},e.showCancelBtn?a.createElement("div",{className:"col-xs-6 text-center cursor-pointer padding12 change-cancel cancel-btn","data-dismiss":"modal",onClick:()=>{$(".skip-crop-modal").modal("hide"),e.onCancel&&e.onCancel()}},e.cancelTxt||"Cancel"):null,a.createElement("div",{className:"cursor-pointer text-center padding12 change-confirm text-white confirm-btn green ".concat(e.showCancelBtn?"col-sx-6":"col-sx-12"),onClick:()=>{$(".skip-crop-modal").modal("hide"),e.onContinue&&e.onContinue()}},e.confirmTxt||"Confirm"))))))},81758:(e,t,o)=>{o.d(t,{Td:()=>m,YI:()=>h,YJ:()=>y,b1:()=>v,lZ:()=>I}),o(9087),o(35890);var a=o(8122),i=o(72505),s=o.n(i),n=o(13244),r=o(72350),l=o(4731),c=o(8282);const p=async e=>{let{fileData:t}=e,o=+new Date;return console.time(o),(0,a.A)(t,{maxSizeMB:3,useWebWorker:!0,maxIteration:20,fileType:t.mimeType,onProgress:e=>{console.timeLog(o,e)}})},d=["jpeg","png","jpg"],m=(e,t,o)=>{let a=f(e.name);return-1==d.indexOf(a)?(t||window.websiteBuilder&&window.websiteBuilder.showToastMsg({message:"Only JPG, JPEG & PNG Files are Supported",type:"error",timing:8e3}),o({message:"Only JPG, JPEG & PNG Files are Supported"},!0),!1):!(e.size>256e5&&(t||window.websiteBuilder&&window.websiteBuilder.showToastMsg({message:"Image Size Cannot Be More Than 25 MB",type:"error"}),o({message:"Image Size Cannot Exceed 25 MB"},!0),1))},h=e=>new Promise(((t,o)=>{let a=new FileReader;a.onload=function(e){t(e.target.result)},a.onerror=function(e){o(e)},a.readAsDataURL(e)})),g=(e,t)=>new Promise((async(o,i)=>{try{let i;i="image"===e.type?e:(await a.A.drawFileInCanvas(e))[0];const{width:r,height:l}=i;let c=0,p=0,d=0,m=0,h=0,g=0,u=0,C=0,v="height";c=l/r,m=p?d/p:0,m||(m=1/(t=t||16/9),p=r,d=r/t),m<c&&(v="width");var s=0,n=0;"width"==v?(s=r,n=d*r/p):(n=l,s=l*p/d),u=s,C=n,s>1920&&(u=1920,C=u*n/s),h=(r-s)/2,g=(l-n)/2;let b=document.createElement("canvas");b.width=u,b.height=C,b.getContext("2d").drawImage(i,h,g,s,n,0,0,u,C),o(b)}catch(e){i(e)}})),u=(e,t)=>{const o=document.createElement("canvas");return o.width=e.naturalWidth,o.height=e.naturalHeight,o.getContext("2d").drawImage(e,0,0),o.toDataURL(t)},C=async e=>{let{uploadFrom:t,image:o,extension:a,mimeType:i,sourceImgUrl:s,relativeImgUrl:n,relativeBase64Url:r,canvas:l}=e;return"library"===t||"imageLibrary"===t?E({addParams:"?randNo=".concat(+new Date),imageUploadCommand:k({libraryUrl:s||n,sourceName:"library"})}):["urlMode","system"].includes(t)?(r||(r=u(o,i)),E({addParams:"?randNo=".concat(+new Date),imageUploadCommand:k({base64Image:r,extension:a})})):"jdImages"==t?(r||(r=u(o,i)),E({addParams:"?randNo=".concat(+new Date),imageUploadCommand:k({base64Image:r,extension:a,sourceName:"library",containerWidth:(null==l?void 0:l.width)||null,containerHeight:(null==l?void 0:l.height)||null})})):{imageUrl:n}},v=async e=>{let{imagesrc:t,extension:o="jpeg",relativeImgUrl:a,sourceImgUrl:i,onUploadCB:l,onErrorCB:p,prefWidth:d,prefHeight:m,uploadFrom:h,aspectRatio:u,mimeType:v,onlyUploadedImage:f,doNotShowToastMessage:I,isAdminThemeUser:k}=e;v=v||x(o);const E=await(D=t,new Promise(((e,t)=>{const o=D.match(/https?:\/\/([a-z0-9]+)[.]jdmagicbox[.]com/);if(o&&o[0])s().post("/api/jdmagicbox-image-data",{filepath:D}).then((o=>{if(o.data.isSuccess){const a=document.createElement("img");a.src=o.data.imageBase64,a.onerror=t,a.onload=()=>{e(a)},a.complete&&e(a)}}));else{const o=document.createElement("img");o.setAttribute("crossorigin","anonymous"),o.src=D,o.onerror=t,o.onload=()=>{e(o)},o.complete&&e(o)}})));var D;if(E.type="image",k)return void(0,r.KA)().dispatch((0,c.ey)({aspectRatio:u,prefWidth:d,prefHeight:m,imgSrc:t,relativeImgUrl:a,uploadFrom:h,extension:o,cropperSaveCb:(e,t,o,a)=>{l({imageUrl:e,cropperId:t,relativeImgUrl:a,uploaded:!0,originalImageUrl:o})},imgFor:"isAdminThemeUser"}));const N=[C({uploadFrom:h,image:E,mimeType:v,extension:o,sourceImgUrl:i,relativeImgUrl:a})];N.push(g(E,u));const[S,P]=await Promise.all(N);a=S.imageUrl;const L=P.toDataURL(),B=(0,n.Dw)(a,"","library"),M=w();!f&&l({imageUrl:L,relativeImgUrl:a,originalImageUrl:B,uploaded:!1,imageKey:M}),y(P,{mimeType:v,extension:o,fromCropper:!0,relativeImgUrl:a,doNotShowToastMessage:I,uploadFrom:h,cb:(e,t,o,a)=>{I||b(),l({imageUrl:e,relativeImgUrl:a,originalImageUrl:o,uploaded:!0,imageKey:M,cropperId:t})}})},b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SUCCESS",t=arguments.length>1?arguments[1]:void 0;const o=(0,r.KA)();"SUCCESS"==e?o.dispatch(l.A.showMessage({message:t||"Image Uploaded",type:"success",duration:5e3})):"ERROR"==e&&o.dispatch(l.A.showMessage({message:t||"Error Uploading Image",type:"error",duration:5e3}))},y=async(e,t)=>{let{mimeType:o,extension:a,cropperData:i,canvasData:s,cropBoxData:r,fromCropper:l,relativeImgUrl:c,relativeBase64Url:p,uploadFrom:d,image:m,doNotShowToastMessage:h,cb:g}=t;const u="jdImages"==d?e.toDataURL(o):p,v=[C({uploadFrom:d,mimeType:o,extension:a,image:m,relativeImgUrl:c,relativeBase64Url:u,canvas:e}).then((e=>{let{imageUrl:t}=e;return D({imageUrl:t,cropperData:{cropperData:i,canvasData:s,cropBoxData:r}})}))],y=e.toDataURL(o),w=E({addParams:null,imageUploadCommand:k({base64Image:y,extension:a,sourceName:"banner",containerWidth:(null==e?void 0:e.width)||"",containerHeight:(null==e?void 0:e.height)||""})});v.push(w),Promise.all(v).then((e=>{let[t,o]=e;c=t.imageUrl;const a=(0,n.Dw)(c,"","library");h||b(),g&&g(o.imageUrl,t.cropperId,a,c)}))},w=()=>"TEMP_"+ +new Date,x=e=>{switch(e){case"png":return"image/png";case"webp":return"image/webp";default:return"image/jpeg"}},f=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(".").pop().toLowerCase()},I=(e,t)=>{let{files:o,aspectRatio:i,onlyUploadedImage:s,doNotShowToastMessage:r,sourceName:l}=e,c=!1;for(let e in o){if(!o.hasOwnProperty(e))continue;const d=o[e];if(!m(d,r,t)){c=!0;continue}const h=w(),u=f(d.name),C=d.type||x(u);Promise.all([g(d,i),p({fileData:d}).then(a.A.getDataUrlFromFile)]).then((e=>{const[o,a]=e,i=o.toDataURL(C);!s&&t({imageUrl:i,relativeImgUrl:a,originalImageUrl:a,uploaded:!1,imageKey:h});const c=[],p=E({addParams:null,imageUploadCommand:k({base64Image:i,extension:u,sourceName:l||"banner"})});c.push(p);const d=E({addParams:"?randNo="+ +new Date,imageUploadCommand:k({base64Image:a,extension:u})}).then((e=>{let{imageUrl:t}=e;return D({cropperData:null,imageUrl:t})}));c.push(d),Promise.all(c).then((e=>{r||b(),t({imageUrl:e[0].imageUrl,relativeImgUrl:e[1].imageUrl,originalImageUrl:(0,n.Dw)(e[1].imageUrl,"","library"),cropperId:e[1].cropperId,uploaded:!0,imageKey:h})})).catch((e=>{console.log(e),t({imageKey:h},!0)}))}))}},k=e=>{let{base64Image:t,extension:o="jpeg",sourceName:a,libraryUrl:i,containerWidth:s=1920,containerHeight:n=1080}=e;const r={sourceName:a||"library",sourceId:window.supid,dimensionList:"",uploadToS3:!1,extension:o,originalExtension:o,containerWidth:s,containerHeight:n,uploadToken:+new Date};t&&(r.base64Image=t),i&&(r.libraryUrl=i);const l=new window.FormData;for(let e in r)r.hasOwnProperty(e)&&l.append(e,r[e]);return l},E=async e=>{let{addParams:t,imageUploadCommand:o}=e;const{data:a}=await s()({url:"/marketplace/ajax/uploadImage.service".concat(t||""),method:"POST",async:"true",data:o,contentType:!1,cache:!1,headers:{"Cache-Control":"no-cache, no-store"},processData:!1});if("success"==a.status)return{imageUrl:a.imgURL};b("error",a.status)},D=async e=>{let{cropperData:t,imageUrl:o}=e;const{isMobile:a}=(0,r.KA)().getState().cmsInfo,{data:i}=await s().post("/marketplace/cms/nj/cropper",{cropperData:{cropperData:null,canvasData:null,cropBoxData:null,...t,isMobile:a},imgUrl:o});if(i.isSuccess)return{imageUrl:o,cropperId:i.id}}},71255:(e,t,o)=>{o.d(t,{A:()=>r});var a=o(96540),i=o(12646);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)({}).hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},s.apply(null,arguments)}const n=a.forwardRef(((e,t)=>{let o=e.renderRipple&&e.renderRipple();return e.withinContainer&&o&&(o=a.createElement("div",{className:"ripple-container-div",children:o})),a.createElement(e.tagName,s({className:e.className+" "+e.rippleClass},e.rippleHandler,{style:e.style,ref:t,onClick:e.onClick,seleniumid:e.seleniumid}),o,e.children)})),r=(0,i.A)(n)}}]);